{"version":3,"file":"three.module.ar.js","sources":["../src/ARDebug.js","../src/ARPerspectiveCamera.js","../src/loaders.js","../src/ARUtils.js","../src/ARReticle.js","../src/ARView.js","../src/ARSpeechRecognition.js","../src/index.js"],"sourcesContent":["/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst DEFAULTS = {\n  open: true,\n  showLastHit: true,\n  showPoseStatus: true,\n};\n\nconst SUCCESS_COLOR = '#00ff00';\nconst FAILURE_COLOR = '#ff0077';\n\n// A cache to store original native VRDisplay methods\n// since WebARonARKit does not provide a VRDisplay.prototype[method],\n// and assuming the first time ARDebug proxies a method is the\n// 'native' version, this caches the correct method if we proxy a method twice\nlet cachedVRDisplayMethods = new Map();\n\n/**\n * A throttle function to limit number of DOM writes\n * in the ARDebug view.\n *\n * @param {Function} fn\n * @param {number} timer\n * @param {Object} scope\n *\n * @return {Function}\n */\nfunction throttle(fn, timer, scope) {\n  let lastFired;\n  let timeout;\n\n  return (...args) => {\n    const current = +new Date();\n    let until;\n\n    if (lastFired) {\n      until = lastFired + timer - current;\n    }\n\n    if (until == undefined || until < 0) {\n      lastFired = current;\n      fn.apply(scope, args);\n    } else if (until >= 0) {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        lastFired = current;\n        fn.apply(scope, args);\n      }, until);\n    }\n  };\n}\n/**\n * Class for creating a mesh that fires raycasts and lerps\n * a 3D object along the surface\n */\nclass ARDebug {\n  /**\n   * @param {VRDisplay} vrDisplay\n   * @param {Object} config\n   * @param {boolean} config.open\n   * @param {boolean} config.showLastHit\n   * @param {boolean} config.showPoseStatus\n   */\n  constructor(vrDisplay, config={}) {\n    this.config = Object.assign({}, config, DEFAULTS);\n    this.vrDisplay = vrDisplay;\n\n    this._view = new ARDebugView({ open: this.config.open });\n\n    if (this.config.showLastHit && this.vrDisplay.hitTest) {\n      this._view.addRow('hit-test', new ARDebugHitTestRow(vrDisplay));\n    }\n\n    if (this.config.showPoseStatus && this.vrDisplay.getFrameData) {\n      this._view.addRow('pose-status', new ARDebugPoseRow(vrDisplay));\n    }\n  }\n\n  /**\n   * Opens the debug panel.\n   */\n  open() {\n    this._view.open();\n  }\n\n  /**\n   * Closes the debug panel.\n   */\n  close() {\n    this._view.close();\n  }\n\n  /**\n   * Returns the root DOM element for the panel.\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this._view.getElement();\n  }\n}\n\n/**\n * An implementation that interfaces with the DOM, used\n * by ARDebug\n */\nclass ARDebugView {\n  /**\n   * @param {Object} config\n   * @param {boolean} config.open\n   */\n  constructor(config={}) {\n    this.rows = new Map();\n\n    this.el = document.createElement('div');\n    this.el.style.backgroundColor = '#333';\n    this.el.style.padding = '5px';\n    this.el.style.fontFamily = 'Roboto, Ubuntu, Arial, sans-serif';\n    this.el.style.color = 'rgb(165, 165, 165)';\n    this.el.style.position = 'absolute';\n    this.el.style.right = '20px';\n    this.el.style.top = '0px';\n    this.el.style.width = '200px';\n    this.el.style.fontSize = '12px';\n    this.el.style.zIndex = 9999;\n\n    this._rowsEl = document.createElement('div');\n    this._rowsEl.style.transitionProperty = 'max-height';\n    this._rowsEl.style.transitionDuration = '0.5s';\n    this._rowsEl.style.transitionDelay = '0s';\n    this._rowsEl.style.transitionTimingFunction = 'ease-out';\n    this._rowsEl.style.overflow = 'hidden';\n\n    this._controls = document.createElement('div');\n    this._controls.style.fontSize = '13px';\n    this._controls.style.fontWeight = 'bold';\n    this._controls.style.paddingTop = '5px';\n    this._controls.style.textAlign = 'center';\n    this._controls.style.cursor = 'pointer';\n    this._controls.addEventListener('click', this.toggleControls.bind(this));\n\n    // Initialize the view as open or closed\n    config.open ? this.open() : this.close();\n\n    this.el.appendChild(this._rowsEl);\n    this.el.appendChild(this._controls);\n  }\n\n  /**\n   * Toggles between open and close modes.\n   */\n  toggleControls() {\n    if (this._isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Opens the debugging panel.\n   */\n  open() {\n    // Use max-height with large value to transition\n    // to/from a non-specific height (like auto/100%)\n    // https://stackoverflow.com/a/8331169\n    // @TODO investigate a more complete solution with correct timing,\n    // via something like http://n12v.com/css-transition-to-from-auto/\n    this._rowsEl.style.maxHeight = '100px';\n    this._isOpen = true;\n    this._controls.textContent = 'Close ARDebug';\n    for (let [, row] of this.rows) {\n      row.enable();\n    }\n  }\n\n  /**\n   * Closes the debugging panel.\n   */\n  close() {\n    this._rowsEl.style.maxHeight = '0px';\n    this._isOpen = false;\n    this._controls.textContent = 'Open ARDebug';\n    for (let [, row] of this.rows) {\n      row.disable();\n    }\n  }\n\n  /**\n   * Returns the ARDebugView root element.\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.el;\n  }\n\n  /**\n   * Adds a row to the ARDebugView.\n   *\n   * @param {string} id\n   * @param {ARDebugRow} row\n   */\n  addRow(id, row) {\n    this.rows.set(id, row);\n\n    if (this._isOpen) {\n      row.enable();\n    }\n\n    this._rowsEl.appendChild(row.getElement());\n  }\n}\n\n/**\n * A class that implements features being a row in the ARDebugView.\n */\nclass ARDebugRow {\n  /**\n   * @param {string} title\n   */\n  constructor(title) {\n    this.el = document.createElement('div');\n    this.el.style.width = '100%';\n    this.el.style.borderTop = '1px solid rgb(54, 54, 54)';\n    this.el.style.borderBottom = '1px solid #14171A';\n    this.el.style.position = 'relative';\n    this.el.style.padding = '3px 0px';\n    this.el.style.overflow = 'hidden';\n\n    this._titleEl = document.createElement('span');\n    this._titleEl.style.fontWeight = 'bold';\n    this._titleEl.textContent = title;\n\n    this._dataEl = document.createElement('span');\n    this._dataEl.style.position = 'absolute';\n    this._dataEl.style.left = '40px';\n\n    // Create a text element to update so we can avoid\n    // forced reflows when updating\n    // https://stackoverflow.com/a/17203046\n    this._dataElText = document.createTextNode('');\n    this._dataEl.appendChild(this._dataElText);\n\n    this.el.appendChild(this._titleEl);\n    this.el.appendChild(this._dataEl);\n\n    this.update = throttle(this.update, 500, this);\n  }\n\n  /**\n   * Enables the proxying and inspection functionality of\n   * this row. Should be implemented by child class.\n   */\n  enable() {\n    throw new Error('Implement in child class');\n  }\n\n  /**\n   * Disables the proxying and inspection functionality of\n   * this row. Should be implemented by child class.\n   */\n  disable() {\n    throw new Error('Implement in child class');\n  }\n\n  /**\n   * Returns the ARDebugRow's root element.\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.el;\n  }\n\n  /**\n   * Updates the row's value.\n   *\n   * @param {string} value\n   * @param {boolean} isSuccess\n   */\n  update(value, isSuccess) {\n    this._dataElText.nodeValue = value;\n    this._dataEl.style.color = isSuccess ? SUCCESS_COLOR : FAILURE_COLOR;\n  }\n}\n\n/**\n * The ARDebugRow subclass for displaying hit information\n * by wrapping `vrDisplay.hitTest` and displaying the results.\n */\nclass ARDebugHitTestRow extends ARDebugRow {\n  /**\n   * @param {VRDisplay} vrDisplay\n   */\n  constructor(vrDisplay) {\n    super('Hit');\n    this.vrDisplay = vrDisplay;\n    this._onHitTest = this._onHitTest.bind(this);\n\n    // Store the native hit test, or proxy the native `hitTest` call with our own\n    this._nativeHitTest = cachedVRDisplayMethods.get('hitTest') || this.vrDisplay.hitTest;\n    cachedVRDisplayMethods.set('hitTest', this._nativeHitTest);\n\n    this._didPreviouslyHit = null;\n  }\n\n  /**\n   * Enables the tracking of hit test information.\n   */\n  enable() {\n    this.vrDisplay.hitTest = this._onHitTest;\n  }\n\n  /**\n   * Disables the tracking of hit test information.\n   */\n  disable() {\n    this.vrDisplay.hitTest = this._nativeHitTest;\n  }\n\n  /**\n   * @param {VRHit} hit\n   * @return {string}\n   */\n  _hitToString(hit) {\n    const mm = hit.modelMatrix;\n    return `${mm[12].toFixed(2)}, ${mm[13].toFixed(2)}, ${mm[14].toFixed(2)}`;\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @return {VRHit?}\n   */\n  _onHitTest(x, y) {\n    const hits = this._nativeHitTest.call(this.vrDisplay, x, y);\n\n    const t = (parseInt(performance.now(), 10) / 1000).toFixed(1);\n    const didHit = hits && hits.length;\n\n    this.update(`${didHit ? this._hitToString(hits[0]) : 'MISS'} @ ${t}s`, didHit);\n    this._didPreviouslyHit = didHit;\n    return hits;\n  }\n}\n\n/**\n * The ARDebugRow subclass for displaying pose information\n * by wrapping `vrDisplay.getFrameData` and displaying the results.\n */\nclass ARDebugPoseRow extends ARDebugRow {\n  /**\n   * @param {VRDisplay} vrDisplay\n   */\n  constructor(vrDisplay) {\n    super('Pose');\n    this.vrDisplay = vrDisplay;\n    this._onGetFrameData = this._onGetFrameData.bind(this);\n\n    // Store the native hit test, or proxy the native `hitTest` call with our own\n    this._nativeGetFrameData = cachedVRDisplayMethods.get('getFrameData') ||\n                               this.vrDisplay.getFrameData;\n    cachedVRDisplayMethods.set('getFrameData', this._nativeGetFrameData);\n\n    this.update('Looking for position...');\n    this._initialPose = false;\n  }\n\n  /**\n   * Enables displaying and pulling getFrameData\n   */\n  enable() {\n    this.vrDisplay.getFrameData = this._onGetFrameData;\n  }\n\n  /**\n   * Disables displaying and pulling getFrameData\n   */\n  disable() {\n    this.vrDisplay.getFrameData = this._nativeGetFrameData;\n  }\n\n  /**\n   * @param {VRPose} pose\n   * @return {string}\n   */\n  _poseToString(pose) {\n    return `${pose[0].toFixed(2)}, ${pose[1].toFixed(2)}, ${pose[2].toFixed(2)}`;\n  }\n\n  /**\n   * Wrapper around getFrameData\n   *\n   * @param {VRFrameData} frameData\n   * @return {boolean}\n   */\n  _onGetFrameData(frameData) {\n    const results = this._nativeGetFrameData.call(this.vrDisplay, frameData);\n    const pose = frameData && frameData.pose && frameData.pose.position;\n    // Ensure we have a valid pose; while the pose SHOULD be null when not\n    // provided by the VRDisplay, on WebARonARCore, the xyz values of position\n    // are all 0 -- mark this as an invalid pose\n    const isValidPose = pose &&\n                        typeof pose[0] === 'number' &&\n                        typeof pose[1] === 'number' &&\n                        typeof pose[2] === 'number' &&\n                        !(pose[0] === 0 && pose[1] === 0 && pose[2] === 0);\n\n    // If we haven't received a pose yet, and still don't have a valid pose\n    // leave the message how it is\n    if (!this._initialPose && !isValidPose) {\n      return results;\n    }\n\n    if (isValidPose) {\n      this.update(this._poseToString(pose), true);\n    } else if (!isValidPose && this._lastPoseValid !== false) {\n      this.update(`Position lost`, false);\n    }\n\n    this._lastPoseValid = isValidPose;\n    this._initialPose = true;\n\n    return results;\n  }\n}\n\n\n// THREE.ARDebug = ARDebug;\nexport { ARDebug };\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PerspectiveCamera } from 'three';\n\n// Reuse the frame data for getting the projection matrix\nlet frameData;\n\n/**\n * Class extending a THREE.PerspectiveCamera, attempting\n * to use the projection matrix provided from an AR-enabled\n * VRDisplay. If no AR-enabled VRDisplay found, uses provided\n * parameters.\n */\nclass ARPerspectiveCamera extends PerspectiveCamera {\n  /**\n   * @param {VRDisplay} vrDisplay\n   * @param {number} fov\n   * @param {number} aspect\n   * @param {number} near\n   * @param {number} far\n   */\n  constructor(vrDisplay, fov, aspect, near, far) {\n    super(fov, aspect, near, far);\n    this.isARPerpsectiveCamera = true;\n    this.vrDisplay = vrDisplay;\n    this.updateProjectionMatrix();\n\n    if (!vrDisplay || !vrDisplay.capabilities.hasPassThroughCamera) {\n      console.warn(`ARPerspectiveCamera does not a VRDisplay with\n                    a pass through camera. Using supplied values and defaults\n                    instead of device camera intrinsics`);\n    }\n  }\n\n  /**\n   * Updates the underlying `projectionMatrix` property from\n   * the AR-enabled VRDisplay, or falls back to\n   * THREE.PerspectiveCamera.prototype.updateProjectionMatrix\n   */\n  updateProjectionMatrix() {\n    const projMatrix = this.getProjectionMatrix();\n    if (!projMatrix) {\n      super.updateProjectionMatrix();\n      return;\n    }\n\n    this.projectionMatrix.fromArray(projMatrix);\n  }\n\n  /**\n   * Gets the projection matrix from AR-enabled VRDisplay\n   * if possible.\n   * @return {!Float32Array}\n   */\n  getProjectionMatrix() {\n    if (this.vrDisplay && this.vrDisplay.getFrameData) {\n      if (!frameData) {\n        frameData = new VRFrameData();\n      }\n      this.vrDisplay.getFrameData(frameData);\n\n      // Can use either left or right projection matrix\n      return frameData.leftProjectionMatrix;\n    }\n    return null;\n  }\n}\n\n\n// THREE.ARPerspectiveCamera = ARPerspectiveCamera;\nexport { ARPerspectiveCamera };\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OBJLoader, MTLLoader } from 'three';\n\n/**\n * This module contains promisified loaders for internal use for\n * exposed ARUtils.\n */\n\nconst noop = function() {};\n\nexport const loadObj = (objPath, materials) => new Promise((resolve, reject) => {\n  const loader = new OBJLoader();\n\n  if (materials) {\n    loader.setMaterials(materials);\n  }\n\n  loader.load(objPath, resolve, noop, reject);\n});\n\nexport const loadMtl = mtlPath => new Promise((resolve, reject) => {\n  const loader = new MTLLoader();\n  const pathChunks = mtlPath.split('/');\n\n  if (pathChunks.length >= 2) {\n    loader.setTexturePath(pathChunks[pathChunks.length - 2]);\n  }\n\n  loader.load(mtlPath, resolve, noop, reject);\n});\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Matrix4,\n  Vector3,\n  Quaternion,\n  Math,\n} from 'three';\nimport { loadMtl, loadObj } from './loaders';\n\nconst LEARN_MORE_LINK = 'https://developers.google.com/ar/develop/web/getting-started';\nconst UNSUPPORTED_MESSAGE = `This augmented reality experience requires\n  WebARonARCore or WebARonARKit, experimental browsers from Google\n  for Android and iOS. Learn more at the <a href=\"${LEARN_MORE_LINK}\">Google Developers site</a>.`;\n\nconst ARUtils = {};\n\nARUtils.isTango = display =>\n  display && display.displayName.toLowerCase().includes('tango');\nexport const isTango = ARUtils.isTango;\n\nARUtils.isARKit = display =>\n  display && display.displayName.toLowerCase().includes('arkit');\nexport const isARKit = ARUtils.isARKit;\n\nARUtils.isARDisplay = display => isARKit(display) || isTango(display);\nexport const isARDisplay = ARUtils.isARDisplay;\n\n/**\n * Returns a promise that resolves to either to a VRDisplay with\n * AR capabilities, or null if no valid AR devices found on the platform.\n *\n * @return {Promise<VRDisplay?>}\n */\nARUtils.getARDisplay = () => new Promise((resolve, reject) => {\n  if (!navigator.getVRDisplays) {\n    resolve(null);\n    return;\n  }\n\n  navigator.getVRDisplays().then(displays => {\n    if (!displays && displays.length === 0) {\n      resolve(null);\n      return;\n    }\n\n    for (let display of displays) {\n      if (isARDisplay(display)) {\n        resolve(display);\n        return;\n      }\n    }\n    resolve(null);\n  });\n});\nexport const getARDisplay = ARUtils.getARDisplay;\n\n/**\n * Takes a path for an OBJ model and optionally a path for an MTL\n * texture and returns a promise resolving to a THREE.Mesh loaded with\n * the appropriate material. Can be used on downloaded models from Blocks.\n *\n * @param {string} objPath\n * @param {string} mtlPath\n * @return {THREE.Mesh}\n */\nARUtils.loadBlocksModel = (objPath, mtlPath) => new Promise((resolve, reject) => {\n  if (!THREE.OBJLoader || !THREE.MTLLoader) {\n    reject(new Error('Must include THREE.OBJLoader and THREE.MTLLoader'));\n    return;\n  }\n\n  let p = Promise.resolve();\n\n  if (mtlPath) {\n    p = loadMtl(mtlPath);\n  }\n\n  p.then(materials => {\n    if (materials) {\n      materials.preload();\n    }\n    return loadObj(objPath, materials);\n  }).then(obj => {\n    const model = obj.children[0];\n    model.geometry.applyMatrix(\n      new Matrix4().makeRotationY(Math.degToRad(-90))\n    );\n\n    return model;\n  }).then(resolve, reject);\n});\nexport const loadBlocksModel = ARUtils.loadBlocksModel;\n\nconst model = new Matrix4();\nconst tempPos = new Vector3();\nconst tempQuat = new Quaternion();\nconst tempScale = new Vector3();\n\n/**\n * Takes a THREE.Object3D and a VRHit and positions and optionally orients\n * the object according to the transform of the VRHit. Can provide an\n * easing value between 0 and 1 corresponding to the lerp between the\n * object's current position/orientation, and the position/orientation of the\n * hit.\n *\n * @param {THREE.Object3D} object\n * @param {VRHit} hit\n * @param {number} easing\n * @param {boolean} applyOrientation\n */\nARUtils.placeObjectAtHit = (object, hit, easing=1, applyOrientation=false) => {\n  if (!hit || !hit.modelMatrix) {\n    throw new Error('placeObjectAtHit requires a VRHit object');\n  }\n\n  model.fromArray(hit.modelMatrix);\n\n  model.decompose(tempPos, tempQuat, tempScale);\n\n  if (easing === 1) {\n    object.position.copy(tempPos);\n    if (applyOrientation) {\n      object.quaternion.copy(tempQuat);\n    }\n  } else {\n    object.position.lerp(tempPos, easing);\n    if (applyOrientation) {\n      object.quaternion.slerp(tempQuat, easing);\n    }\n  }\n};\nexport const placeObjectAtHit = ARUtils.placeObjectAtHit;\n\n/**\n * Injects a DOM element into the current page prompting the user that\n * their browser does not support these AR features.\n */\nARUtils.displayUnsupportedMessage = () => {\n  const element = document.createElement('div');\n  element.id = 'webgl-error-message';\n  element.style.fontFamily = 'monospace';\n  element.style.fontSize = '13px';\n  element.style.fontWeight = 'normal';\n  element.style.textAlign = 'center';\n  element.style.background = '#fff';\n  element.style.border = '1px solid black';\n  element.style.color = '#000';\n  element.style.padding = '1.5em';\n  element.style.width = '400px';\n  element.style.margin = '5em auto 0';\n  element.innerHTML = UNSUPPORTED_MESSAGE;\n  document.body.appendChild(element);\n};\nexport const displayUnsupportedMessage = ARUtils.displayUnsupportedMessage;\n\n\nexport { ARUtils };\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Mesh,\n  Vector3,\n  RingGeometry,\n  MeshBasicMaterial,\n  Matrix4,\n  Math,\n} from 'three';\nimport { placeObjectAtHit } from './ARUtils';\n\n/**\n * Class for creating a mesh that fires raycasts and lerps\n * a 3D object along the surface\n */\nclass ARReticle extends Mesh {\n  /**\n   * @param {VRDisplay} vrDisplay\n   * @param {number} innerRadius\n   * @param {number} outerRadius\n   * @param {number} color\n   * @param {number} easing\n   */\n  constructor(\n    vrDisplay,\n    innerRadius = 0.02,\n    outerRadius = 0.05,\n    color = 0xff0077,\n    easing = 0.25\n  ) {\n    const geometry = new RingGeometry(innerRadius, outerRadius, 36, 64);\n    const material = new MeshBasicMaterial({ color });\n\n    // Orient the geometry so it's position is flat on a horizontal surface\n    geometry.applyMatrix(new Matrix4().makeRotationX(Math.degToRad(-90)));\n\n    super(geometry, material);\n    this.visible = false;\n\n    this.easing = easing;\n    this.applyOrientation = true;\n    this.vrDisplay = vrDisplay;\n    this._planeDir = new Vector3();\n  }\n\n  /**\n   * Attempt to fire a raycast from normalized screen coordinates\n   * x and y and lerp the reticle to the position.\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  update(x = 0.5, y = 0.5) {\n    if (!this.vrDisplay || !this.vrDisplay.hitTest) {\n      return;\n    }\n\n    const hit = this.vrDisplay.hitTest(x, y);\n    if (hit && hit.length > 0) {\n      this.visible = true;\n      placeObjectAtHit(this, hit[0], this.applyOrientation, this.easing);\n    }\n  }\n}\n\n\n// THREE.ARReticle = ARReticle;\nexport { ARReticle };\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isARKit } from './ARUtils';\nimport vertexSource from './shaders/arview.vert';\nimport fragmentSource from './shaders/arview.frag';\n\n/**\n * Creates and load a shader from a string, type specifies either 'vertex' or 'fragment'\n *\n * @param {WebGLRenderingContext} gl\n * @param {string} str\n * @param {string} type\n * @return {!WebGLShader}\n */\nfunction getShader(gl, str, type) {\n  let shader;\n  if (type == 'fragment') {\n    shader = gl.createShader(gl.FRAGMENT_SHADER);\n  } else if (type == 'vertex') {\n    shader = gl.createShader(gl.VERTEX_SHADER);\n  } else {\n    return null;\n  }\n\n  gl.shaderSource(shader, str);\n  gl.compileShader(shader);\n\n  const result = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (!result) {\n    alert(gl.getShaderInfoLog(shader));\n    return null;\n  }\n\n  return shader;\n}\n\n/**\n * Creates a shader program from vertex and fragment shader sources\n *\n * @param {WebGLRenderingContext} gl\n * @param {string} vs\n * @param {string} fs\n * @return {!WebGLProgram}\n */\nfunction getProgram(gl, vs, fs) {\n  const vertexShader = getShader(gl, vs, 'vertex');\n  const fragmentShader = getShader(gl, fs, 'fragment');\n  if (!fragmentShader) {\n    return null;\n  }\n\n  const shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  const result = gl.getProgramParameter(shaderProgram, gl.LINK_STATUS);\n  if (!result) {\n    alert('Could not initialise arview shaders');\n  }\n\n  return shaderProgram;\n}\n\n/**\n * Calculate the correct orientation depending on the device and the camera\n * orientations.\n *\n * @param {number} screenOrientation\n * @param {number} seeThroughCameraOrientation\n * @return {number}\n */\nfunction combineOrientations(screenOrientation, seeThroughCameraOrientation) {\n  let seeThroughCameraOrientationIndex = 0;\n  switch (seeThroughCameraOrientation) {\n    case 90:\n      seeThroughCameraOrientationIndex = 1;\n      break;\n    case 180:\n      seeThroughCameraOrientationIndex = 2;\n      break;\n    case 270:\n      seeThroughCameraOrientationIndex = 3;\n      break;\n    default:\n      seeThroughCameraOrientationIndex = 0;\n      break;\n  }\n  let screenOrientationIndex = 0;\n  switch (screenOrientation) {\n    case 90:\n      screenOrientationIndex = 1;\n      break;\n    case 180:\n      screenOrientationIndex = 2;\n      break;\n    case 270:\n      screenOrientationIndex = 3;\n      break;\n    default:\n      screenOrientationIndex = 0;\n      break;\n  }\n  let ret = screenOrientationIndex - seeThroughCameraOrientationIndex;\n  if (ret < 0) {\n    ret += 4;\n  }\n  return ret % 4;\n}\n\n/**\n * Renders the ar camera's video texture\n */\nclass ARVideoRenderer {\n  /**\n   * @param {VRDisplay} vrDisplay\n   * @param {WebGLRenderingContext} gl\n   */\n  constructor(vrDisplay, gl) {\n    this.vrDisplay = vrDisplay;\n    this.gl = gl;\n    if (this.vrDisplay) {\n      this.passThroughCamera = vrDisplay.getPassThroughCamera();\n      this.program = getProgram(gl, vertexSource, fragmentSource);\n    }\n\n    gl.useProgram(this.program);\n\n    // Setup a quad\n    this.vertexPositionAttribute = gl.getAttribLocation(\n      this.program,\n      'aVertexPosition'\n    );\n    this.textureCoordAttribute = gl.getAttribLocation(\n      this.program,\n      'aTextureCoord'\n    );\n\n    this.samplerUniform = gl.getUniformLocation(this.program, 'uSampler');\n\n    this.vertexPositionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBuffer);\n    let vertices = [\n      -1.0,\n      1.0,\n      0.0,\n      -1.0,\n      -1.0,\n      0.0,\n      1.0,\n      1.0,\n      0.0,\n      1.0,\n      -1.0,\n      0.0,\n    ];\n    let f32Vertices = new Float32Array(vertices);\n    gl.bufferData(gl.ARRAY_BUFFER, f32Vertices, gl.STATIC_DRAW);\n    this.vertexPositionBuffer.itemSize = 3;\n    this.vertexPositionBuffer.numItems = 12;\n\n    this.textureCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.textureCoordBuffer);\n    // Precalculate different texture UV coordinates depending on the possible\n    // orientations of the device depending if there is a VRDisplay or not\n    let textureCoords = null;\n    if (this.vrDisplay) {\n      let u =\n        this.passThroughCamera.width / this.passThroughCamera.textureWidth;\n      let v =\n        this.passThroughCamera.height / this.passThroughCamera.textureHeight;\n      textureCoords = [\n        [0.0, 0.0, 0.0, v, u, 0.0, u, v],\n        [u, 0.0, 0.0, 0.0, u, v, 0.0, v],\n        [u, v, u, 0.0, 0.0, v, 0.0, 0.0],\n        [0.0, v, u, v, 0.0, 0.0, u, 0.0],\n      ];\n    } else {\n      textureCoords = [\n        [0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0],\n        [1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0],\n        [1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0],\n        [0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0],\n      ];\n    }\n\n    this.f32TextureCoords = [];\n    for (let i = 0; i < textureCoords.length; i++) {\n      this.f32TextureCoords.push(new Float32Array(textureCoords[i]));\n    }\n    // Store the current combined orientation to check if it has changed\n    // during the update calls and use the correct texture coordinates.\n    this.combinedOrientation = combineOrientations(\n      screen.orientation.angle,\n      this.passThroughCamera.orientation\n    );\n\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      this.f32TextureCoords[this.combinedOrientation],\n      gl.STATIC_DRAW\n    );\n    this.textureCoordBuffer.itemSize = 2;\n    this.textureCoordBuffer.numItems = 8;\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    this.indexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    let indices = [0, 1, 2, 2, 1, 3];\n    let ui16Indices = new Uint16Array(indices);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, ui16Indices, gl.STATIC_DRAW);\n    this.indexBuffer.itemSize = 1;\n    this.indexBuffer.numItems = 6;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n    this.texture = gl.createTexture();\n    gl.useProgram(null);\n\n    // The projection matrix will be based on an identify orthographic camera\n    this.projectionMatrix = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    this.mvMatrix = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    return this;\n  }\n\n  /**\n   * Renders the quad\n   */\n  render() {\n    let gl = this.gl;\n    gl.useProgram(this.program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBuffer);\n    gl.enableVertexAttribArray(this.vertexPositionAttribute);\n    gl.vertexAttribPointer(\n      this.vertexPositionAttribute,\n      this.vertexPositionBuffer.itemSize,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.textureCoordBuffer);\n\n    // Check the current orientation of the device combined with the\n    // orientation of the VRSeeThroughCamera to determine the correct UV\n    // coordinates to be used.\n    let combinedOrientation = combineOrientations(\n      screen.orientation.angle,\n      this.passThroughCamera.orientation\n    );\n    if (combinedOrientation !== this.combinedOrientation) {\n      this.combinedOrientation = combinedOrientation;\n      gl.bufferData(\n        gl.ARRAY_BUFFER,\n        this.f32TextureCoords[this.combinedOrientation],\n        gl.STATIC_DRAW\n      );\n    }\n    gl.enableVertexAttribArray(this.textureCoordAttribute);\n    gl.vertexAttribPointer(\n      this.textureCoordAttribute,\n      this.textureCoordBuffer.itemSize,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_EXTERNAL_OES, this.texture);\n    // Update the content of the texture in every frame.\n    gl.texImage2D(\n      gl.TEXTURE_EXTERNAL_OES,\n      0,\n      gl.RGB,\n      gl.RGB,\n      gl.UNSIGNED_BYTE,\n      this.passThroughCamera\n    );\n    gl.uniform1i(this.samplerUniform, 0);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\n    gl.drawElements(\n      gl.TRIANGLES,\n      this.indexBuffer.numItems,\n      gl.UNSIGNED_SHORT,\n      0\n    );\n\n    // Disable enabled states to allow other render calls to correctly work\n    gl.bindTexture(gl.TEXTURE_EXTERNAL_OES, null);\n    gl.disableVertexAttribArray(this.vertexPositionAttribute);\n    gl.disableVertexAttribArray(this.textureCoordAttribute);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    gl.useProgram(null);\n  }\n}\n\n/**\n * A helper class that takes a VRDisplay with AR capabilities\n * and renders the see through camera to the passed in WebGLRenderer's\n * context.\n */\nclass ARView {\n  /**\n   * @param {VRDisplay} vrDisplay\n   * @param {THREE.WebGLRenderer} renderer\n   */\n  constructor(vrDisplay, renderer) {\n    this.vrDisplay = vrDisplay;\n    if (isARKit(this.vrDisplay)) {\n      return;\n    }\n    this.renderer = renderer;\n    this.gl = renderer.context;\n\n    this.videoRenderer = new ARVideoRenderer(vrDisplay, this.gl);\n    this._resetGLState();\n\n    // Cache the width/height so we're not potentially forcing\n    // a reflow if there's been a style invalidation\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    window.addEventListener('resize', this.onWindowResize.bind(this), false);\n  }\n\n  /**\n   * Updates the stored width/height of window on resize.\n   */\n  onWindowResize() {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n  }\n\n  /**\n   * Renders the see through camera to the passed in renderer\n   */\n  render() {\n    if (isARKit(this.vrDisplay)) {\n      return;\n    }\n\n    let gl = this.gl;\n    let dpr = window.devicePixelRatio;\n    let width = this.width * dpr;\n    let height = this.height * dpr;\n\n    if (gl.viewportWidth !== width) {\n      gl.viewportWidth = width;\n    }\n\n    if (gl.viewportHeight !== height) {\n      gl.viewportHeight = height;\n    }\n\n    this.gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);\n    this.videoRenderer.render();\n    this._resetGLState();\n  }\n\n  /**\n   * Resets the GL state in the THREE.WebGLRenderer.\n   */\n  _resetGLState() {\n    if (typeof this.renderer.resetGLState === 'function') {\n      // If using three.js <= r86\n      this.renderer.resetGLState();\n    } else {\n      // If using three.js >= r87\n      this.renderer.state.reset();\n    }\n  }\n}\n\n\n// THREE.ARView = ARView;\nexport { ARView };\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n /* eslint-disable */\n(function() {\n  if (window.webarSpeechRecognitionInstance) {\n\n    function addEventHandlingToObject(object) {\n      object.listeners = { };\n      object.addEventListener = function(eventType, callback) {\n        if (!callback) {\n          return this;\n        }\n        var listeners = this.listeners[eventType];\n        if (!listeners) {\n          this.listeners[eventType] = listeners = [];\n        }\n        if (listeners.indexOf(callback) < 0) {\n          listeners.push(callback);\n        }\n        return this;\n      };\n      object.removeEventListener = function(eventType, callback) {\n        if (!callback) {\n          return this;\n        }\n        var listeners = this.listeners[eventType];\n        if (listeners) {\n          var i = listeners.indexOf(callback);\n          if (i >= 0) {\n            this.listeners[eventType] = listeners.splice(i, 1);\n          }\n        }\n        return this;\n      };\n      object.callEventListeners = function(eventType, event) {\n        if (!event) {\n          event = { target : this };\n        }\n        if (!event.target) {\n          event.target = this;\n        }\n        event.type = eventType;\n        var onEventType = 'on' + eventType;\n        if (typeof(this[onEventType]) === 'function') {\n          this[onEventType](event)\n        }\n        var listeners = this.listeners[eventType];\n        if (listeners) {\n          for (var i = 0; i < listeners.length; i++) {\n            var typeofListener = typeof(listeners[i]);\n            if (typeofListener === 'object') {\n              listeners[i].handleEvent(event);\n            }\n            else if (typeofListener === 'function') {\n              listeners[i](event);\n            }\n          }\n        }\n        return this;\n      };\n    } \n\n    addEventHandlingToObject(window.webarSpeechRecognitionInstance);\n    var originalWebKitSpeechRecognition = window.webkitSpeechRecognition;\n    window.webkitSpeechRecognition = function() {\n      return window.webarSpeechRecognitionInstance;\n    };\n  }\n})();\n","/*\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint no-unused-vars: \"off\" */\n\nexport { ARDebug } from './ARDebug';\nexport { ARPerspectiveCamera } from './ARPerspectiveCamera';\nexport { ARReticle } from './ARReticle';\nexport { ARUtils } from './ARUtils';\nexport { ARView } from './ARView';\nimport './ARSpeechRecognition';\n"],"names":["ARUtils"],"mappings":"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"}