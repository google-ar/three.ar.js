/*
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayUnsupportedMessage=t.placeObjectAtHit=t.loadBlocksModel=t.getARDisplay=t.isARDisplay=t.isARKit=t.isTango=void 0;var r=i(9);THREE.ARUtils=Object.create(null),THREE.ARUtils.isTango=function(e){return e&&e.displayName.toLowerCase().includes("tango")};var n=t.isTango=THREE.ARUtils.isTango;THREE.ARUtils.isARKit=function(e){return e&&e.displayName.toLowerCase().includes("arkit")};var o=t.isARKit=THREE.ARUtils.isARKit;THREE.ARUtils.isARDisplay=function(e){return o(e)||n(e)};var s=t.isARDisplay=THREE.ARUtils.isARDisplay;THREE.ARUtils.getARDisplay=function(){return new Promise(function(e,t){if(!navigator.getVRDisplays)return void e(null);navigator.getVRDisplays().then(function(t){if(!t&&0===t.length)return void e(null);var i=!0,r=!1,n=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;if(s(l))return void e(l)}}catch(e){r=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}e(null)})})};t.getARDisplay=THREE.ARUtils.getARDisplay;THREE.ARUtils.loadBlocksModel=function(e,t){return new Promise(function(i,n){if(!THREE.OBJLoader||!THREE.MTLLoader)return void n(new Error("Must include THREE.OBJLoader and THREE.MTLLoader"));var o=Promise.resolve();t&&(o=(0,r.loadMtl)(t)),o.then(function(t){return t&&t.preload(),(0,r.loadObj)(e,t)}).then(function(e){var t=e.children[0];return t.geometry.applyMatrix((new THREE.Matrix4).makeRotationY(THREE.Math.degToRad(-90))),t}).then(i,n)})};var a=(t.loadBlocksModel=THREE.ARUtils.loadBlocksModel,new THREE.Matrix4),l=new THREE.Vector3,u=new THREE.Quaternion,h=new THREE.Vector3;THREE.ARUtils.placeObjectAtHit=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!t.modelMatrix)throw new Error("placeObjectAtHit requires a VRHit object");a.fromArray(t.modelMatrix),a.decompose(l,u,h),1===i?(e.position.copy(l),r&&e.quaternion.copy(u)):(e.position.lerp(l,i),r&&e.quaternion.slerp(u,i))};t.placeObjectAtHit=THREE.ARUtils.placeObjectAtHit;THREE.ARUtils.displayUnsupportedMessage=function(){var e=document.createElement("div");e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.border="1px solid black",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",e.innerHTML='This augmented reality experience requires\n  WebARonARCore or WebARonARKit, experimental browsers from Google \n  for Android and iOS. Learn more at<a href="https://developers.google.com/ar/develop/web/getting-started">developers.google.com</a>.',document.body.appendChild(e)};t.displayUnsupportedMessage=THREE.ARUtils.displayUnsupportedMessage},function(e,t,i){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,i){var r=void 0,n=void 0;return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=+new Date,u=void 0;r&&(u=r+t-l),void 0==u||u<0?(r=l,e.apply(i,s)):u>=0&&(clearTimeout(n),n=setTimeout(function(){r=l,e.apply(i,s)},u))}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),u={open:!0,showLastHit:!0,showPoseStatus:!0},h=new Map,c=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.config=Object.assign({},i,u),this.vrDisplay=t,this._view=new f({open:this.config.open}),this.config.showLastHit&&this.vrDisplay.hitTest&&this._view.addRow("hit-test",new p(t)),this.config.showPoseStatus&&this.vrDisplay.getFrameData&&this._view.addRow("pose-status",new v(t))}return l(e,[{key:"open",value:function(){this._view.open()}},{key:"close",value:function(){this._view.close()}},{key:"getElement",value:function(){return this._view.getElement()}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.rows=new Map,this.el=document.createElement("div"),this.el.style.backgroundColor="#333",this.el.style.padding="5px",this.el.style.fontFamily="Roboto, Ubuntu, Arial, sans-serif",this.el.style.color="rgb(165, 165, 165)",this.el.style.position="absolute",this.el.style.right="20px",this.el.style.top="0px",this.el.style.width="200px",this.el.style.fontSize="12px",this.el.style.zIndex=9999,this._rowsEl=document.createElement("div"),this._rowsEl.style.transitionProperty="max-height",this._rowsEl.style.transitionDuration="0.5s",this._rowsEl.style.transitionDelay="0s",this._rowsEl.style.transitionTimingFunction="ease-out",this._rowsEl.style.overflow="hidden",this._controls=document.createElement("div"),this._controls.style.fontSize="13px",this._controls.style.fontWeight="bold",this._controls.style.paddingTop="5px",this._controls.style.textAlign="center",this._controls.style.cursor="pointer",this._controls.addEventListener("click",this.toggleControls.bind(this)),t.open?this.open():this.close(),this.el.appendChild(this._rowsEl),this.el.appendChild(this._controls)}return l(e,[{key:"toggleControls",value:function(){this._isOpen?this.close():this.open()}},{key:"open",value:function(){this._rowsEl.style.maxHeight="100px",this._isOpen=!0,this._controls.textContent="Close ARDebug";var e=!0,t=!1,i=void 0;try{for(var r,n=this.rows[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){a(r.value,2)[1].enable()}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"close",value:function(){this._rowsEl.style.maxHeight="0px",this._isOpen=!1,this._controls.textContent="Open ARDebug";var e=!0,t=!1,i=void 0;try{for(var r,n=this.rows[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){a(r.value,2)[1].disable()}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"getElement",value:function(){return this.el}},{key:"addRow",value:function(e,t){this.rows.set(e,t),this._isOpen&&t.enable(),this._rowsEl.appendChild(t.getElement())}}]),e}(),d=function(){function e(t){o(this,e),this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.borderTop="1px solid rgb(54, 54, 54)",this.el.style.borderBottom="1px solid #14171A",this.el.style.position="relative",this.el.style.padding="3px 0px",this.el.style.overflow="hidden",this._titleEl=document.createElement("span"),this._titleEl.style.fontWeight="bold",this._titleEl.textContent=t,this._dataEl=document.createElement("span"),this._dataEl.style.position="absolute",this._dataEl.style.left="40px",this._dataElText=document.createTextNode(""),this._dataEl.appendChild(this._dataElText),this.el.appendChild(this._titleEl),this.el.appendChild(this._dataEl),this.update=s(this.update,500,this)}return l(e,[{key:"enable",value:function(){throw new Error("Implement in child class")}},{key:"disable",value:function(){throw new Error("Implement in child class")}},{key:"getElement",value:function(){return this.el}},{key:"update",value:function(e,t){this._dataElText.nodeValue=e,this._dataEl.style.color=t?"#00ff00":"#ff0077"}}]),e}(),p=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Hit"));return i.vrDisplay=e,i._onHitTest=i._onHitTest.bind(i),i._nativeHitTest=h.get("hitTest")||i.vrDisplay.hitTest,h.set("hitTest",i._nativeHitTest),i._didPreviouslyHit=null,i}return n(t,e),l(t,[{key:"enable",value:function(){this.vrDisplay.hitTest=this._onHitTest}},{key:"disable",value:function(){this.vrDisplay.hitTest=this._nativeHitTest}},{key:"_hitToString",value:function(e){var t=e.modelMatrix;return t[12].toFixed(2)+", "+t[13].toFixed(2)+", "+t[14].toFixed(2)}},{key:"_onHitTest",value:function(e,t){var i=this._nativeHitTest.call(this.vrDisplay,e,t),r=(parseInt(performance.now(),10)/1e3).toFixed(1),n=i&&i.length;return this.update((n?this._hitToString(i[0]):"MISS")+" @ "+r+"s",n),this._didPreviouslyHit=n,i}}]),t}(d),v=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Pose"));return i.vrDisplay=e,i._onGetFrameData=i._onGetFrameData.bind(i),i._nativeGetFrameData=h.get("getFrameData")||i.vrDisplay.getFrameData,h.set("getFrameData",i._nativeGetFrameData),i.update("Looking for position..."),i._initialPose=!1,i}return n(t,e),l(t,[{key:"enable",value:function(){this.vrDisplay.getFrameData=this._onGetFrameData}},{key:"disable",value:function(){this.vrDisplay.getFrameData=this._nativeGetFrameData}},{key:"_poseToString",value:function(e){return e[0].toFixed(2)+", "+e[1].toFixed(2)+", "+e[2].toFixed(2)}},{key:"_onGetFrameData",value:function(e){var t=this._nativeGetFrameData.call(this.vrDisplay,e),i=e&&e.pose&&e.pose.position,r=i&&"number"==typeof i[0]&&"number"==typeof i[1]&&"number"==typeof i[2]&&!(0===i[0]&&0===i[1]&&0===i[2]);return this._initialPose||r?(r?this.update(this._poseToString(i),!0):r||!1===this._lastPoseValid||this.update("Position lost",!1),this._lastPoseValid=r,this._initialPose=!0,t):t}}]),t}(d);THREE.ARDebug=c,t.default=c},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},l=void 0,u=function(e){function t(e,i,o,s,a){r(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,o,s,a));return l.isARPerpsectiveCamera=!0,l.vrDisplay=e,l.updateProjectionMatrix(),e&&e.capabilities.hasPassThroughCamera||console.warn("ARPerspectiveCamera does not a VRDisplay with\n                    a pass through camera. Using supplied values and defaults\n                    instead of device camera intrinsics"),l}return o(t,e),s(t,[{key:"updateProjectionMatrix",value:function(){var e=this.getProjectionMatrix();if(!e)return void a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateProjectionMatrix",this).call(this);this.projectionMatrix.fromArray(e)}},{key:"getProjectionMatrix",value:function(){return this.vrDisplay&&this.vrDisplay.getFrameData?(l||(l=new VRFrameData),this.vrDisplay.getFrameData(l),l.leftProjectionMatrix):null}}]),t}(THREE.PerspectiveCamera);THREE.ARPerspectiveCamera=u,t.default=u},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(0),l=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.02,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16711799,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25;r(this,t);var l=new THREE.RingGeometry(i,o,36,64),u=new THREE.MeshBasicMaterial({color:s});l.applyMatrix((new THREE.Matrix4).makeRotationX(THREE.Math.degToRad(-90)));var h=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l,u));return h.visible=!1,h.easing=a,h.applyOrientation=!0,h.vrDisplay=e,h._planeDir=new THREE.Vector3,h}return o(t,e),s(t,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(this.vrDisplay&&this.vrDisplay.hitTest){var i=this.vrDisplay.hitTest(e,t);i&&i.length>0&&(this.visible=!0,(0,a.placeObjectAtHit)(this,i[0],this.applyOrientation,this.easing))}}}]),t}(THREE.Mesh);THREE.ARReticle=l,t.default=l},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){if(window.webarSpeechRecognitionInstance){!function(e){e.listeners={},e.addEventListener=function(e,t){if(!t)return this;var i=this.listeners[e];return i||(i=[],this.listeners[e]=i),i.indexOf(t)<0&&i.push(t),this},e.removeEventListener=function(e,t){if(!t)return this;var i=this.listeners[e];if(i){var r=i.indexOf(t);r>=0&&(this.listeners[e]=i.splice(r,1))}return this},e.callEventListeners=function(e,t){t||(t={target:this}),t.target||(t.target=this),t.type=e;var i="on"+e;"function"==typeof this[i]&&this[i](t);var n=this.listeners[e];if(n)for(var o=0;o<n.length;o++){var s=r(n[o]);"object"===s?n[o].handleEvent(t):"function"===s&&n[o](t)}return this}}(window.webarSpeechRecognitionInstance);window.webkitSpeechRecognition;window.webkitSpeechRecognition=function(){return window.webarSpeechRecognitionInstance}}}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,i){var r=void 0;if("fragment"==i)r=e.createShader(e.FRAGMENT_SHADER);else{if("vertex"!=i)return null;r=e.createShader(e.VERTEX_SHADER)}return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(alert(e.getShaderInfoLog(r)),null)}function s(e,t,i){var r=o(e,t,"vertex"),n=o(e,i,"fragment");if(!n)return null;var s=e.createProgram();return e.attachShader(s,r),e.attachShader(s,n),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||alert("Could not initialise arview shaders"),s}function a(e,t){var i=0;switch(t){case 90:i=1;break;case 180:i=2;break;case 270:i=3;break;default:i=0}var r=0;switch(e){case 90:r=1;break;case 180:r=2;break;case 270:r=3;break;default:r=0}var n=r-i;return n<0&&(n+=4),n%4}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),u=i(0),h=i(7),c=r(h),f=i(6),d=r(f),p=function(){function e(t,i){n(this,e),this.vrDisplay=t,this.gl=i,this.vrDisplay&&(this.passThroughCamera=t.getPassThroughCamera(),this.program=s(i,c.default,d.default)),i.useProgram(this.program),this.vertexPositionAttribute=i.getAttribLocation(this.program,"aVertexPosition"),this.textureCoordAttribute=i.getAttribLocation(this.program,"aTextureCoord"),this.samplerUniform=i.getUniformLocation(this.program,"uSampler"),this.vertexPositionBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.vertexPositionBuffer);var r=[-1,1,0,-1,-1,0,1,1,0,1,-1,0],o=new Float32Array(r);i.bufferData(i.ARRAY_BUFFER,o,i.STATIC_DRAW),this.vertexPositionBuffer.itemSize=3,this.vertexPositionBuffer.numItems=12,this.textureCoordBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.textureCoordBuffer);var l=null;if(this.vrDisplay){var u=this.passThroughCamera.width/this.passThroughCamera.textureWidth,h=this.passThroughCamera.height/this.passThroughCamera.textureHeight;l=[[0,0,0,h,u,0,u,h],[u,0,0,0,u,h,0,h],[u,h,u,0,0,h,0,0],[0,h,u,h,0,0,u,0]]}else l=[[0,0,0,1,1,0,1,1],[1,0,0,0,1,1,0,1],[1,1,1,0,0,1,0,0],[0,1,1,1,0,0,1,0]];this.f32TextureCoords=[];for(var f=0;f<l.length;f++)this.f32TextureCoords.push(new Float32Array(l[f]));this.combinedOrientation=a(screen.orientation.angle,this.passThroughCamera.orientation),i.bufferData(i.ARRAY_BUFFER,this.f32TextureCoords[this.combinedOrientation],i.STATIC_DRAW),this.textureCoordBuffer.itemSize=2,this.textureCoordBuffer.numItems=8,i.bindBuffer(i.ARRAY_BUFFER,null),this.indexBuffer=i.createBuffer(),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var p=[0,1,2,2,1,3],v=new Uint16Array(p);return i.bufferData(i.ELEMENT_ARRAY_BUFFER,v,i.STATIC_DRAW),this.indexBuffer.itemSize=1,this.indexBuffer.numItems=6,i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),this.texture=i.createTexture(),i.useProgram(null),this.projectionMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.mvMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this}return l(e,[{key:"render",value:function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexPositionBuffer),e.enableVertexAttribArray(this.vertexPositionAttribute),e.vertexAttribPointer(this.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.textureCoordBuffer);var t=a(screen.orientation.angle,this.passThroughCamera.orientation);t!==this.combinedOrientation&&(this.combinedOrientation=t,e.bufferData(e.ARRAY_BUFFER,this.f32TextureCoords[this.combinedOrientation],e.STATIC_DRAW)),e.enableVertexAttribArray(this.textureCoordAttribute),e.vertexAttribPointer(this.textureCoordAttribute,this.textureCoordBuffer.itemSize,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_EXTERNAL_OES,this.texture),e.texImage2D(e.TEXTURE_EXTERNAL_OES,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,this.passThroughCamera),e.uniform1i(this.samplerUniform,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.drawElements(e.TRIANGLES,this.indexBuffer.numItems,e.UNSIGNED_SHORT,0),e.bindTexture(e.TEXTURE_EXTERNAL_OES,null),e.disableVertexAttribArray(this.vertexPositionAttribute),e.disableVertexAttribArray(this.textureCoordAttribute),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.useProgram(null)}}]),e}(),v=function(){function e(t,i){n(this,e),this.vrDisplay=t,(0,u.isARKit)(this.vrDisplay)||(this.renderer=i,this.gl=i.context,this.videoRenderer=new p(t,this.gl),this.renderer.resetGLState(),this.width=window.innerWidth,this.height=window.innerHeight,window.addEventListener("resize",this.onWindowResize.bind(this),!1))}return l(e,[{key:"onWindowResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight}},{key:"render",value:function(){if(!(0,u.isARKit)(this.vrDisplay)){var e=this.gl,t=window.devicePixelRatio,i=this.width*t,r=this.height*t;e.viewportWidth!==i&&(e.viewportWidth=i),e.viewportHeight!==r&&(e.viewportHeight=r),this.gl.viewport(0,0,e.viewportWidth,e.viewportHeight),this.videoRenderer.render(),this.renderer.resetGLState()}}}]),e}();THREE.ARView=v,t.default=v},function(e,t,i){"use strict";e.exports="// Copyright 2017 Google Inc. All Rights Reserved.\n// Licensed under the Apache License, Version 2.0 (the 'License');\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an 'AS IS' BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n#extension GL_OES_EGL_image_external : require\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\n\nuniform samplerExternalOES uSampler;\n\nvoid main(void) {\n  gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},function(e,t,i){"use strict";e.exports="#define GLSLIFY 1\n// Copyright 2017 Google Inc. All Rights Reserved.\n// Licensed under the Apache License, Version 2.0 (the 'License');\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an 'AS IS' BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4(aVertexPosition, 1.0);\n  vTextureCoord = aTextureCoord;\n}\n"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(1),o=(r(n),i(2)),s=(r(o),i(3)),a=(r(s),i(0)),l=(r(a),i(5));r(l);i(4)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.loadObj=function(e,t){return new Promise(function(i,n){var o=new THREE.OBJLoader;t&&o.setMaterials(t),o.load(e,i,r,n)})},t.loadMtl=function(e){return new Promise(function(t,i){var n=new THREE.MTLLoader,o=e.split("/");o.length>=2&&n.setTexturePath(o[o.length-2]),n.load(e,t,r,i)})}}]);